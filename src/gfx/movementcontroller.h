#ifndef __MOVEMENTCONTROLLER_H__
#define __MOVEMENTCONTROLLER_H__

#include "rotation.h"

// Generated figure-8 path (two circles meeting at origin)
// Radius: 60.0 pixels, Resolution: 72 points per circle

struct CircleCoord {
    WORD x;
    WORD y;
};

static const struct CircleCoord circleCoords[144] = {
    { FLOATTOFIX(0.000000), FLOATTOFIX(0.000000) },
    { FLOATTOFIX(0.114159), FLOATTOFIX(2.614672) },
    { FLOATTOFIX(0.455767), FLOATTOFIX(5.209445) },
    { FLOATTOFIX(1.022225), FLOATTOFIX(7.764571) },
    { FLOATTOFIX(1.809221), FLOATTOFIX(10.260604) },
    { FLOATTOFIX(2.810766), FLOATTOFIX(12.678548) },
    { FLOATTOFIX(4.019238), FLOATTOFIX(15.000000) },
    { FLOATTOFIX(5.425439), FLOATTOFIX(17.207293) },
    { FLOATTOFIX(7.018667), FLOATTOFIX(19.283628) },
    { FLOATTOFIX(8.786797), FLOATTOFIX(21.213203) },
    { FLOATTOFIX(10.716372), FLOATTOFIX(22.981333) },
    { FLOATTOFIX(12.792707), FLOATTOFIX(24.574561) },
    { FLOATTOFIX(15.000000), FLOATTOFIX(25.980762) },
    { FLOATTOFIX(17.321452), FLOATTOFIX(27.189234) },
    { FLOATTOFIX(19.739396), FLOATTOFIX(28.190779) },
    { FLOATTOFIX(22.235429), FLOATTOFIX(28.977775) },
    { FLOATTOFIX(24.790555), FLOATTOFIX(29.544233) },
    { FLOATTOFIX(27.385328), FLOATTOFIX(29.885841) },
    { FLOATTOFIX(30.000000), FLOATTOFIX(30.000000) },
    { FLOATTOFIX(32.614672), FLOATTOFIX(29.885841) },
    { FLOATTOFIX(35.209445), FLOATTOFIX(29.544233) },
    { FLOATTOFIX(37.764571), FLOATTOFIX(28.977775) },
    { FLOATTOFIX(40.260604), FLOATTOFIX(28.190779) },
    { FLOATTOFIX(42.678548), FLOATTOFIX(27.189234) },
    { FLOATTOFIX(45.000000), FLOATTOFIX(25.980762) },
    { FLOATTOFIX(47.207293), FLOATTOFIX(24.574561) },
    { FLOATTOFIX(49.283628), FLOATTOFIX(22.981333) },
    { FLOATTOFIX(51.213203), FLOATTOFIX(21.213203) },
    { FLOATTOFIX(52.981333), FLOATTOFIX(19.283628) },
    { FLOATTOFIX(54.574561), FLOATTOFIX(17.207293) },
    { FLOATTOFIX(55.980762), FLOATTOFIX(15.000000) },
    { FLOATTOFIX(57.189234), FLOATTOFIX(12.678548) },
    { FLOATTOFIX(58.190779), FLOATTOFIX(10.260604) },
    { FLOATTOFIX(58.977775), FLOATTOFIX(7.764571) },
    { FLOATTOFIX(59.544233), FLOATTOFIX(5.209445) },
    { FLOATTOFIX(59.885841), FLOATTOFIX(2.614672) },
    { FLOATTOFIX(60.000000), FLOATTOFIX(0.000000) },
    { FLOATTOFIX(59.885841), FLOATTOFIX(-2.614672) },
    { FLOATTOFIX(59.544233), FLOATTOFIX(-5.209445) },
    { FLOATTOFIX(58.977775), FLOATTOFIX(-7.764571) },
    { FLOATTOFIX(58.190779), FLOATTOFIX(-10.260604) },
    { FLOATTOFIX(57.189234), FLOATTOFIX(-12.678548) },
    { FLOATTOFIX(55.980762), FLOATTOFIX(-15.000000) },
    { FLOATTOFIX(54.574561), FLOATTOFIX(-17.207293) },
    { FLOATTOFIX(52.981333), FLOATTOFIX(-19.283628) },
    { FLOATTOFIX(51.213203), FLOATTOFIX(-21.213203) },
    { FLOATTOFIX(49.283628), FLOATTOFIX(-22.981333) },
    { FLOATTOFIX(47.207293), FLOATTOFIX(-24.574561) },
    { FLOATTOFIX(45.000000), FLOATTOFIX(-25.980762) },
    { FLOATTOFIX(42.678548), FLOATTOFIX(-27.189234) },
    { FLOATTOFIX(40.260604), FLOATTOFIX(-28.190779) },
    { FLOATTOFIX(37.764571), FLOATTOFIX(-28.977775) },
    { FLOATTOFIX(35.209445), FLOATTOFIX(-29.544233) },
    { FLOATTOFIX(32.614672), FLOATTOFIX(-29.885841) },
    { FLOATTOFIX(30.000000), FLOATTOFIX(-30.000000) },
    { FLOATTOFIX(27.385328), FLOATTOFIX(-29.885841) },
    { FLOATTOFIX(24.790555), FLOATTOFIX(-29.544233) },
    { FLOATTOFIX(22.235429), FLOATTOFIX(-28.977775) },
    { FLOATTOFIX(19.739396), FLOATTOFIX(-28.190779) },
    { FLOATTOFIX(17.321452), FLOATTOFIX(-27.189234) },
    { FLOATTOFIX(15.000000), FLOATTOFIX(-25.980762) },
    { FLOATTOFIX(12.792707), FLOATTOFIX(-24.574561) },
    { FLOATTOFIX(10.716372), FLOATTOFIX(-22.981333) },
    { FLOATTOFIX(8.786797), FLOATTOFIX(-21.213203) },
    { FLOATTOFIX(7.018667), FLOATTOFIX(-19.283628) },
    { FLOATTOFIX(5.425439), FLOATTOFIX(-17.207293) },
    { FLOATTOFIX(4.019238), FLOATTOFIX(-15.000000) },
    { FLOATTOFIX(2.810766), FLOATTOFIX(-12.678548) },
    { FLOATTOFIX(1.809221), FLOATTOFIX(-10.260604) },
    { FLOATTOFIX(1.022225), FLOATTOFIX(-7.764571) },
    { FLOATTOFIX(0.455767), FLOATTOFIX(-5.209445) },
    { FLOATTOFIX(0.114159), FLOATTOFIX(-2.614672) },
    { FLOATTOFIX(0.000000), FLOATTOFIX(0.000000) },
    { FLOATTOFIX(-0.114159), FLOATTOFIX(2.614672) },
    { FLOATTOFIX(-0.455767), FLOATTOFIX(5.209445) },
    { FLOATTOFIX(-1.022225), FLOATTOFIX(7.764571) },
    { FLOATTOFIX(-1.809221), FLOATTOFIX(10.260604) },
    { FLOATTOFIX(-2.810766), FLOATTOFIX(12.678548) },
    { FLOATTOFIX(-4.019238), FLOATTOFIX(15.000000) },
    { FLOATTOFIX(-5.425439), FLOATTOFIX(17.207293) },
    { FLOATTOFIX(-7.018667), FLOATTOFIX(19.283628) },
    { FLOATTOFIX(-8.786797), FLOATTOFIX(21.213203) },
    { FLOATTOFIX(-10.716372), FLOATTOFIX(22.981333) },
    { FLOATTOFIX(-12.792707), FLOATTOFIX(24.574561) },
    { FLOATTOFIX(-15.000000), FLOATTOFIX(25.980762) },
    { FLOATTOFIX(-17.321452), FLOATTOFIX(27.189234) },
    { FLOATTOFIX(-19.739396), FLOATTOFIX(28.190779) },
    { FLOATTOFIX(-22.235429), FLOATTOFIX(28.977775) },
    { FLOATTOFIX(-24.790555), FLOATTOFIX(29.544233) },
    { FLOATTOFIX(-27.385328), FLOATTOFIX(29.885841) },
    { FLOATTOFIX(-30.000000), FLOATTOFIX(30.000000) },
    { FLOATTOFIX(-32.614672), FLOATTOFIX(29.885841) },
    { FLOATTOFIX(-35.209445), FLOATTOFIX(29.544233) },
    { FLOATTOFIX(-37.764571), FLOATTOFIX(28.977775) },
    { FLOATTOFIX(-40.260604), FLOATTOFIX(28.190779) },
    { FLOATTOFIX(-42.678548), FLOATTOFIX(27.189234) },
    { FLOATTOFIX(-45.000000), FLOATTOFIX(25.980762) },
    { FLOATTOFIX(-47.207293), FLOATTOFIX(24.574561) },
    { FLOATTOFIX(-49.283628), FLOATTOFIX(22.981333) },
    { FLOATTOFIX(-51.213203), FLOATTOFIX(21.213203) },
    { FLOATTOFIX(-52.981333), FLOATTOFIX(19.283628) },
    { FLOATTOFIX(-54.574561), FLOATTOFIX(17.207293) },
    { FLOATTOFIX(-55.980762), FLOATTOFIX(15.000000) },
    { FLOATTOFIX(-57.189234), FLOATTOFIX(12.678548) },
    { FLOATTOFIX(-58.190779), FLOATTOFIX(10.260604) },
    { FLOATTOFIX(-58.977775), FLOATTOFIX(7.764571) },
    { FLOATTOFIX(-59.544233), FLOATTOFIX(5.209445) },
    { FLOATTOFIX(-59.885841), FLOATTOFIX(2.614672) },
    { FLOATTOFIX(-60.000000), FLOATTOFIX(0.000000) },
    { FLOATTOFIX(-59.885841), FLOATTOFIX(-2.614672) },
    { FLOATTOFIX(-59.544233), FLOATTOFIX(-5.209445) },
    { FLOATTOFIX(-58.977775), FLOATTOFIX(-7.764571) },
    { FLOATTOFIX(-58.190779), FLOATTOFIX(-10.260604) },
    { FLOATTOFIX(-57.189234), FLOATTOFIX(-12.678548) },
    { FLOATTOFIX(-55.980762), FLOATTOFIX(-15.000000) },
    { FLOATTOFIX(-54.574561), FLOATTOFIX(-17.207293) },
    { FLOATTOFIX(-52.981333), FLOATTOFIX(-19.283628) },
    { FLOATTOFIX(-51.213203), FLOATTOFIX(-21.213203) },
    { FLOATTOFIX(-49.283628), FLOATTOFIX(-22.981333) },
    { FLOATTOFIX(-47.207293), FLOATTOFIX(-24.574561) },
    { FLOATTOFIX(-45.000000), FLOATTOFIX(-25.980762) },
    { FLOATTOFIX(-42.678548), FLOATTOFIX(-27.189234) },
    { FLOATTOFIX(-40.260604), FLOATTOFIX(-28.190779) },
    { FLOATTOFIX(-37.764571), FLOATTOFIX(-28.977775) },
    { FLOATTOFIX(-35.209445), FLOATTOFIX(-29.544233) },
    { FLOATTOFIX(-32.614672), FLOATTOFIX(-29.885841) },
    { FLOATTOFIX(-30.000000), FLOATTOFIX(-30.000000) },
    { FLOATTOFIX(-27.385328), FLOATTOFIX(-29.885841) },
    { FLOATTOFIX(-24.790555), FLOATTOFIX(-29.544233) },
    { FLOATTOFIX(-22.235429), FLOATTOFIX(-28.977775) },
    { FLOATTOFIX(-19.739396), FLOATTOFIX(-28.190779) },
    { FLOATTOFIX(-17.321452), FLOATTOFIX(-27.189234) },
    { FLOATTOFIX(-15.000000), FLOATTOFIX(-25.980762) },
    { FLOATTOFIX(-12.792707), FLOATTOFIX(-24.574561) },
    { FLOATTOFIX(-10.716372), FLOATTOFIX(-22.981333) },
    { FLOATTOFIX(-8.786797), FLOATTOFIX(-21.213203) },
    { FLOATTOFIX(-7.018667), FLOATTOFIX(-19.283628) },
    { FLOATTOFIX(-5.425439), FLOATTOFIX(-17.207293) },
    { FLOATTOFIX(-4.019238), FLOATTOFIX(-15.000000) },
    { FLOATTOFIX(-2.810766), FLOATTOFIX(-12.678548) },
    { FLOATTOFIX(-1.809221), FLOATTOFIX(-10.260604) },
    { FLOATTOFIX(-1.022225), FLOATTOFIX(-7.764571) },
    { FLOATTOFIX(-0.455767), FLOATTOFIX(-5.209445) },
    { FLOATTOFIX(-0.114159), FLOATTOFIX(-2.614672) }
};

#define CIRCLE_COORDS_COUNT 144

// Function declarations
void initMovementController(UWORD screenWidth, UWORD screenHeight, UWORD bitmapWidth, UWORD bitmapHeight);
void getNextPosition(WORD *x, WORD *y);
void getInitialPosition(WORD *x, WORD *y);
UWORD getCurrentPositionIndex(void);

#endif